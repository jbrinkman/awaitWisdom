@section Header {
<div class="page-head">
    <h1><pre>await Wisdom()</pre></h1>
    <pre class="subheading">yielding control to caller until Wisdom() returns</pre>
</div>
}
<div class="pure-g">
    @{
        bool first = true;
    
        @foreach(IDocument doc in Documents
                .Where(x => x.ContainsKey("Published") && x.Get<DateTimeOffset>("Published") <= System.DateTimeOffset.Now)
                .OrderByDescending(x => x.Get<DateTimeOffset>("Published"))
                .Take(5))
        {
            string file = doc.String("RelativeFilePath").Replace("\\", "/");
            string link = "Posts/" + System.IO.Path.GetFileNameWithoutExtension(file);
            string lead = doc.String("Lead");
                            
            if (!first)
            {
                <hr /> 
            }
            first = false;

            <div class="pure-u-1">
                <a href="@link">
                    <h2>@doc.String("Title")</h2>
                    @if(!string.IsNullOrWhiteSpace(lead))
                    {
                        <h3>@lead</h3>
                    }
                </a>
                <p>Posted on @(doc.Get<DateTimeOffset>("Published").ToLocalTime().ToString("D"))</p>
                @Html.Raw(doc.String("Excerpt"))             
            </div>       
        }
    }
</div>